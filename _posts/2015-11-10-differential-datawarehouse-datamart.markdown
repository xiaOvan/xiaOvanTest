---
layout: post
title: 数据仓库与数据集市（DW vs Data Mart)
date: 2015-11-10 15:32:24.000000000 +09:00
categories: 数据集市
tags: datawarehouse datamart architecture
author: xiaOvan
---

* content
{:toc}


## 数据仓库和数据集市概念及区别

### 数据仓库
    
    是一个集成的面向主题的数据集合，设计的目的是支持DSS（决策支持系统）的功能，在数据仓库里，每个数据单元都和特定的时间相关。数据仓库包括原子级别的数据和轻度汇总的数据。数据仓库是面向主题的、集成的、不可更新的(稳定性)、随时间不断变化（不同时间）的数据集合，用以支持经营管理中的决策制定过程

数据仓库特点:

* 多主题
* 含有数据的详细信息
* 集成所有外部的数据源
* 相对稳定
* 反映历史变化

#### 数据仓库中数据结构

数据仓库一般存储在关系型数据库里面，符合至少第三范式，另外烨包涵半结构化数据和非结构化数据，它们经过转化后以某种形式统一地储存在数据仓库中，即通常说的ETL（Extract, Transform, Load，抽取、转换、装载）的过程

### 数据集市

    数据集市也叫数据市场，是一个从操作的数据和其他的为某个特殊的专业人员团体服务的数据源中收集数据的仓库。从范围上来说，数据是从企业范围的数据库、数据仓库，或者是更加专业的数据仓库中抽取出来的。数据中心的重点就在于它迎合了专业用户群体的特殊需求，在分析、内容、表现，以及易用方面。数据中心的用户希望数据是由他们熟悉的术语表现的。
    数据仓库是一个集成的、面向主题的数据集合，设计的目的是支持DSS（决策支持系统）功能。在数据仓库里，每个数据单元都和特定的时间相关。数据仓库包括原子级别的数据和轻度汇总的数据，是面向主题的、集成的、不可更新的(稳定性)、随时间不断变化（不同时间）的数据集合，用以支持经营管理中的决策制定过程。
    那么数据集市就是企业级数据仓库的一个子集，他主要面向部门级业务，并且只面向某个特定的主题。为了解决灵活性和性能之间的矛盾，数据集市就是数据仓库体系结构中增加的一种小型的部门或工作组级别的数据仓库。数据集市存储为特定用户预先计算好的数据，从而满足用户对性能的需求。数据集市可以在一定程度上缓解访问数据仓库的瓶颈

数据集市特点:

* 数据集市的特征包括规模小
* 有特定的应用
* 面向部门
* 由业务部门定义、设计和开发
* 业务部门管理和维护
* 能快速实现
* 购买较便宜
* 投资快速回收
* 工具集的紧密集成
* 提供更详细的、预先存在的、数据仓库的摘要子集
* 可升级到完整的数据仓库

#### 数据集市中数据结构

数据集市中数据的结构通常被描述为星型结构或雪花结构。一个星型结构包含两个基本部分——一个事实表和各种支持维表。

事实表
    
    事实表描述数据集市中最密集的数据。在电话公司中，用于呼叫的数据是典型的最密集数据；在银行中，与账目核对和自动柜员机有关的数据是典型的最密集数据。对于零售业而言，销售和库存数据是最密集的数据等等。
    事实表是预先被连接到一起的多种类型数据的组合体，它包括：一个反映事实表建立目的的实体的主键，如一张订单、一次销售、一个电话等等，主键信息，连接事实表与维表的外键，外键携带的非键值外部数据。如果这种非键外部数据经常用于事实表中的数据分析，它就会被包括在事实表的范围内。事实表是高度索引化的。事实表中出现30到40条索引非常常见。有时实事表的每列都建了索引，这样作的结果是使事实表中的数据非常容易读取。但是，导入索引所需的资源数量必须为等式提供因数。通常，事实表的数据不能更改，但可以输入数据，一旦正确输入一个记录，就不能更改此记录的任何内容了。

维表

    维表是围绕着事实表建立的。维表包含非密集型数据，它通过外键与事实表相连。典型的维表建立在数据集市的基础上，包括产品目录、客户名单、厂商列表等等。
    数据集市中的数据来源于企业数据仓库。所有数据，除了一个例外，在导入到数据集市之前都应该经过企业数据仓库。这个例外就是用于数据集市的特定数据，它不能用于数据仓库的其他地方。外部数据通常属于这类范畴。如果情况不是这样，数据就会用于决策支持系统的其他地方，那么这些数据就必须经过企业数据仓库。
    数据集市包含两种类型的数据，通常是详细数据和汇总数据。

facts and dimension table

![image](http://o7q84v6xt.bkt.clouddn.com/facts.png)

More about dimension model & facts 

* [星型模式](https://en.wikipedia.org/wiki/Star_schema)
* [维度模型](http://ky-consulting.weebly.com/uploads/6/1/2/6/61266765/2015-12-20_dimensional_model.pdf)
* [维和事实表](http://www.datamartist.com/dimensional-tables-and-fact-tables)

#### 建立数据集市必要性

    虽然OLTP和遗留系统拥有宝贵的信息，但是可能难以从这些系统中提取有意义的信息并且速度也较慢。而且这些系统虽然一般可支持预先定义操作的报表，但却经常无法支持一个组织对于历史的、联合的、“智能的”或易于访问的信息的需求。因为数据分布在许多跨系统和平台的表中，而且通常是“脏的”，包含了不一致的和无效的值，使得难于分析。数据集市将合并不同系统的数据源来满足业务信息需求。

若能有效地得以实现，数据集市将可以快速且方便地访问简单信息以及系统的和历史的视图。一个设计良好的数据集市将会：

* 发布特定用户群体所需的信息，且无需受制于源系统的大量需求和操作性危机。
* 支持访问非易变（nonvolatile）的业务信息。（非易变的信息是以预定的时间间隔进行更新的，并且不受OLTP系统进行中的更新的影响。）
* 调和来自于组织里多个运行系统的信息，比如账目、销售、库存和客户管理以及组织外部的行业数据。
* 通过默认有效值、使各系统的值保持一致以及添加描述以使隐含代码有意义，从而提供净化的（cleansed）数据。
* 为即席分析和预定义报表提供合理的查询响应时间（不同于OLTP系统中所需的调优需求）。
* 通过提供对于遗留系统和OLTP应用程序的选择来减少对这些应用程序的要求，以获得更多所需信息。

## 数据仓库和数据集市区别

数据仓库和数据集市之间的区别可以直观地用下图表示

![image](http://o7q84v6xt.bkt.clouddn.com/dmart.png)

其中数据集市中的uvw代表事实(facts)表，而通过外键关联的xyz等属于维(dimension)表.

 \  | 数据仓库 | 数据集市
---|---|---
数据来源 | 现有系统、外部系统 | 数据仓库
范围 | 企业级 | 部门或工作组
主题 | 企业主题 | 部门或细分的主题
数据粒度 | 最细的粒度 | 较初的粒度(summarized data)
数据结构 | 结构化范式(至少满足第三范式) | 星型（雪花）或者亮着融合
历史数据 | 大量的历史数据 | 适当的历史数据
优化 | 处理海量数据（数据挖掘） | 便于访问和分析（快速查询）
索引 | 高度索引 | 高度索引




